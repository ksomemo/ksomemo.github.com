

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>今までのワンライナー &mdash; gh-pages  ドキュメント</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="索引"
              href="../genindex.html"/>
        <link rel="search" title="検索" href="../search.html"/>
    <link rel="top" title="gh-pages  ドキュメント" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> gh-pages
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">今までのワンライナー</a></li>
<li><a class="reference internal" href="#ruby">なぜRubyなのか</a></li>
<li><a class="reference internal" href="#hello-ruby-oneliner">Hello Ruby Oneliner</a></li>
<li><a class="reference internal" href="#">複数行</a></li>
<li><a class="reference internal" href="#">出力の評価タイミング</a></li>
<li><a class="reference internal" href="#">型の確認</a></li>
<li><a class="reference internal" href="#">末尾の改行をとる</a></li>
<li><a class="reference internal" href="#awk">awkの代わり</a></li>
<li><a class="reference internal" href="#">区切り文字</a></li>
<li><a class="reference internal" href="#">正規表現区切り</a></li>
<li><a class="reference internal" href="#">分割した値にアクセス</a></li>
<li><a class="reference internal" href="#">行へのアクセス</a></li>
<li><a class="reference internal" href="#">他の機能</a></li>
<li><a class="reference internal" href="#">まとめ</a></li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gh-pages</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>今までのワンライナー</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/qiita/Ruby One-liner .md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="">
<span id="id1"></span><h1>今までのワンライナー<a class="headerlink" href="#" title="このヘッドラインへのパーマリンク">¶</a></h1>
<ul class="simple">
<li>(仕方なく使っている)Windowsで気軽にテキスト処理したい</li>
<li>PowerShellはよくわからない</li>
<li>Gitをインストールした時についてくるGit Bash(+awk, sed, たまにperl)で頑張っていた</li>
</ul>
</div>
<div class="section" id="ruby">
<span id="ruby"></span><h1>なぜRubyなのか<a class="headerlink" href="#ruby" title="このヘッドラインへのパーマリンク">¶</a></h1>
<ul class="simple">
<li>１つの言語で済ませたいなと思って調べているとRubyでできるっぽい</li>
<li>Perlを必死に覚えればいいけど、今更感ある</li>
<li>Pythonのほうがよく使うけど、ワンライナーとlambdaが貧弱かつPython2と3の違いを意識したくなかった</li>
</ul>
</div>
<div class="section" id="hello-ruby-oneliner">
<span id="hello-ruby-oneliner"></span><h1>Hello Ruby Oneliner<a class="headerlink" href="#hello-ruby-oneliner" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="highlight-bash:ruby_oneliner.sh"><div class="highlight"><pre><span></span>ruby -e &#39;puts &quot;Hello Ruby Oneliner&quot;&#39;
</pre></div>
</div>
</div>
<div class="section" id="">
<span id="id2"></span><h1>複数行<a class="headerlink" href="#" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="highlight-bash:ruby_oneliner_ex.sh"><div class="highlight"><pre><span></span># 省略形がどのように推移しているかまとめた
seq 1 3 | ruby -e &#39;while gets; puts $_; end&#39;
seq 1 3 | ruby -ne &#39;puts $_&#39;
seq 1 3 | ruby -ne &#39;print&#39;
seq 1 3 | ruby -npe &#39;&#39;
1
2
3
</pre></div>
</div>
</div>
<div class="section" id="">
<span id="id3"></span><h1>出力の評価タイミング<a class="headerlink" href="#" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="highlight-bash:ruby_oneliner_ex2.sh"><div class="highlight"><pre><span></span># コマンド実行後に出力される
seq 1 3 | ruby -pne &#39;print &quot;-&quot;&#39;
-1
-2
-3
</pre></div>
</div>
</div>
<div class="section" id="">
<span id="id4"></span><h1>型の確認<a class="headerlink" href="#" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="highlight-bash:ruby_oneliner_ex3.sh"><div class="highlight"><pre><span></span># pで確認すると末尾の改行が残っている
seq 1 3 | ruby -ne &#39;p $_&#39;
&quot;1\n&quot;
&quot;2\n&quot;
&quot;3\n&quot;
</pre></div>
</div>
</div>
<div class="section" id="">
<span id="id5"></span><h1>末尾の改行をとる<a class="headerlink" href="#" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="highlight-bash:ruby_oneliner_ex4.sh"><div class="highlight"><pre><span></span># l オプションによって改行が除かれる
seq 1 3 | ruby -nle &#39;p $_&#39;
&quot;1&quot;
&quot;2&quot;
&quot;3&quot;
</pre></div>
</div>
<div class="highlight-bash:ruby_oneliner_ex5.sh"><div class="highlight"><pre><span></span># オプションをつけると特殊な変数の内容が変わるらしい
echo &quot;&quot; | ruby -ne &#39;p $/; p $\&#39;
&quot;\n&quot;
nil

echo &quot;&quot; | ruby -nle &#39;p $/; p $\&#39;
&quot;\n&quot;
&quot;\n&quot;
</pre></div>
</div>
</div>
<div class="section" id="awk">
<span id="awk"></span><h1>awkの代わり<a class="headerlink" href="#awk" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="highlight-bash:ruby_oneliner_ex6.sh"><div class="highlight"><pre><span></span>echo &quot;1 2 3&quot; | ruby -ane &#39;p $F&#39;
[&quot;1&quot;, &quot;2&quot;, &quot;3&quot;]

echo &quot;1,2,3&quot; | ruby -ane &#39;p $F&#39;
[&quot;1,2,3&quot;]

echo &quot;1,2,3&quot; | ruby -F, -ane &#39;p $F&#39;
[&quot;1&quot;, &quot;2&quot;, &quot;3\n&quot;]
</pre></div>
</div>
</div>
<div class="section" id="">
<span id="id6"></span><h1>区切り文字<a class="headerlink" href="#" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="highlight-bash:ruby_oneliner_ex7.sh"><div class="highlight"><pre><span></span>echo &quot;&quot; | ruby -ae &#39;p $;&#39;
nil

# 区切り文字は正規表現扱い
echo &quot;&quot; | ruby -F.  -ae &#39;p $;&#39;
echo &quot;&quot; | ruby -F\. -ae &#39;p $;&#39;
/./

echo &quot;&quot; | ruby -F\\.  -ae &#39;p $;&#39;
echo &quot;&quot; | ruby -F&#39;\.&#39; -ae &#39;p $;&#39;
/\./
</pre></div>
</div>
</div>
<div class="section" id="">
<span id="id7"></span><h1>正規表現区切り<a class="headerlink" href="#" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="highlight-bash:ruby_oneliner_ex8.sh"><div class="highlight"><pre><span></span># テスト用
seq -w 0 .05 .1
0.00
0.05
0.10
</pre></div>
</div>
<div class="highlight-bash:ruby_oneliner_ex9.sh"><div class="highlight"><pre><span></span>seq -w 0 .05 .1 | ruby -F&#39;\.&#39; -anle &#39;p $F&#39;
[&quot;0&quot;, &quot;00&quot;]
[&quot;0&quot;, &quot;05&quot;]
[&quot;0&quot;, &quot;10&quot;]
</pre></div>
</div>
</div>
<div class="section" id="">
<span id="id8"></span><h1>分割した値にアクセス<a class="headerlink" href="#" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="highlight-bash:ruby_oneliner_ex10.sh"><div class="highlight"><pre><span></span>seq -w 0 .05 .1 | ruby -F&#39;\.&#39; -anle &#39;p $F[1]&#39;
&quot;00&quot;
&quot;05&quot;
&quot;10&quot;
</pre></div>
</div>
</div>
<div class="section" id="">
<span id="id9"></span><h1>行へのアクセス<a class="headerlink" href="#" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="highlight-bash:ruby_oneliner_ex11.sh"><div class="highlight"><pre><span></span># sedの代わりなら、gsub
seq -w 0 .05 .1 | ruby -nle &#39;p $_.to_f&#39;
0.0
0.05
0.1
</pre></div>
</div>
</div>
<div class="section" id="">
<span id="id10"></span><h1>他の機能<a class="headerlink" href="#" title="このヘッドラインへのパーマリンク">¶</a></h1>
<ul class="simple">
<li>ファイル指定をしてワンライナー実行</li>
<li>awkのようにBEGIN, ENDを使ったsummaryの作成</li>
<li>sedのようにiオプションでバックアップファイルの作成</li>
</ul>
</div>
<div class="section" id="">
<span id="id11"></span><h1>まとめ<a class="headerlink" href="#" title="このヘッドラインへのパーマリンク">¶</a></h1>
<ul class="simple">
<li>Rubyだけでいろいろできる</li>
<li>Rubyで書いておくとShellだけで突っ走らずにスクリプトにするようにしそうな気がした</li>
</ul>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, ksomemo.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>